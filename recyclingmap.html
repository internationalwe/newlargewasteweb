<!DOCTYPE html>
<head>
    <title>지역별 재활용센터</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a62f33c0b7ebab0a8dc5e81387d5048e"></script>
    <style>
        .img-container {
            text-align: center;
        }
        select {
            width: 200px;
            padding: .8em .5em;
            border: 1px solid #999;
            font-family: inherit;
            background: url('img/arrow.jpg') no-repeat 95% 50%;
            border-radius: 0px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            margin:0
        }
    </style>
</head>

<nav>
    <ul class="nav-container">
        <a href="index.html"><img src="img\KakaoTalk_20210630_213321666.png" alt="이미지" height="52ox"/></a>
        <li class="nav-item"> <a href="chair.html">의자</a> </li>
        <li class="nav-item"> <a href="desk.html">책상</a> </li>
        <li class="nav-item"> <a href="drawer.html">서랍장</a> </li>
        <li class="nav-item"> <a href="bed.html">침대</a> </li>
        <li class="nav-item"> <a href="sa.html">재활용 지도</a> </li>
    </ul>
</nav>
<body>
    <header>대형가구 재활용센터</header>
    <h2>재사용 가능한 물품은 재활용센터를 통해서 재활용해보세요</h2>
    <!-- <label for="gu-select">배출 하시는 구를 선택하세요</label> -->
    <h3>
        <select name="seoul-gu" id="gu-select" onchange="handleOnChange(this)">
            <option value="Jongno">종로구</option>
            <option value="Jung">중구</option>
            <option value="Yongsan">용산</option>
            <option value="Seongdong">성동구</option>
            <option value="Gwangjin">광진구</option>
            <option value="Dongdaemun">동대문구</option>
            <option value="Jungnang">중랑구</option>
            <option value="Seongbuk">성북구</option>
            <option value="Gangbuk">강북구</option>
            <option value="Dobong">도봉구</option>
            <option value="Nowon">노원구</option>
            <option value="Eunpyeong">은평구</option>
            <option value="Seodaemun">서대문구</option>
            <option value="Mapo">마포구</option>
            <option value="Yangcheon">양천구</option>
            <option value="Gangseo">강서구</option>
            <option value="Guro">구로구</option>
            <option value="Geumcheon">금천구</option>
            <option value="Yeongdeungpo">영등포구</option>
            <option value="Dongjak">동작구</option>
            <option value="Gwanak">관악구</option>
            <option value="Seocho">서초구</option>
            <option value="Gangnam">강남구</option>
            <option value="Songpa">송파구</option>
            <option value="Gangdong">강동구</option>
        </select>
    </h3>
    <div id="map" style="width:100%;height:80vh;"></div>

    <script>
     var Seocho_positions = [
        {
            content: '<div style="width:350px;height:65px;padding:5px" >과천선바위재활용센터<br>주소 : 서울 서초구 잠원로14길 29<br>전화번호 : 070-4986-1250</div>', 
            latlng: new kakao.maps.LatLng(37.517840013472075, 127.01552807278331)
        },
        {
            content: '<div style="width:380px;height:65px;padding:5px" >나눔재활용<br>주소 : 서울 서초구 강남대로34길 68 은성빌딩<br>전화번호 : 02-6378-1919</div>', 
            latlng: new kakao.maps.LatLng(37.483920550965465, 127.03954461617077)
        },
        {
            content: '<div style="width:380px;height:65px;padding:5px" >서초구재활용센터<br>주소 : 서울 서초구 양재대로12길 73-19<br>전화번호 : 02-571-7272</div>', 
            latlng: new kakao.maps.LatLng(37.45923236242595, 127.04102075860315)
        },
        {
            content: '<div style="width:380px;height:65px;padding:5px" >양심재활용<br>주소 : 서울 서초구 서초중앙로 122 웅산빌딩<br>전화번호 : 02-2135-6445</div>', 
            latlng: new kakao.maps.LatLng(37.492690876932436, 127.01414047891713)
        },
        {
            content: '<div style="width:380px;height65px;padding:5px" >서초힐링중고가전<br>주소 : 서울 서초구 강남대로8길 56<br>전화번호 : 010-8565-1151</div>', 
            latlng: new kakao.maps.LatLng(37.469216867642245, 127.04368555569158)
        }
    ];
    var Gwanak_positions = [
        {
            content: '<div style="width:380px;height:65px;padding:5px" >리싸이클시티 관악점<br>주소 : 서울 관악구 남부순환로 1494<br>전화번호 : 02-888-8484</div>', 
            latlng: new kakao.maps.LatLng(37.48191545661949, 126.9165175880014)
        },
        {
            content: '<div style="width:380px;height:65px;padding:5px" >관악구지정 재활용센터<br>주소 : 서울 관악구 남부순환로 1494<br>전화번호 : 02-842-8425</div>', 
            latlng: new kakao.maps.LatLng(37.481881738680535, 126.91661655500783)
        },
        {
            content: '<div style="width:380px;height:65px;padding:5px" >가전재활용센타<br>주소 : 서울 관악구 신림로 161<br>전화번호 : 0507-1477-3366</div>', 
            latlng: new kakao.maps.LatLng(37.47351960649564, 126.9331254472004)
        },
        {
            content: '<div style="width:380px;height:65px;padding:5px" >알뜰나라<br>주소 : 서울 관악구 신림로 202<br>전화번호 : 010-8538-1820</div>', 
            latlng: new kakao.maps.LatLng(37.47546127166166, 126.93721056925482)
        },
        {
            content: '<div style="width:380px;height:65px;padding:5px" >관악중고가전<br>주소 : 서울 관악구 난곡로 285<br>전화번호 : 010-4002-2489</div>', 
            latlng: new kakao.maps.LatLng(37.47937562734398, 126.91478496559337)
        }
    ];

    var mapContainer = document.getElementById('map'), // 지도를 표시할 div  
        mapOption = { 
            center: new kakao.maps.LatLng(37.5178693164268, 127.0153725435554), // 지도의 중심좌표
            level: 7 // 지도의 확대 레벨
        };

    var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
    
    function handleOnChange(e){
        // var mapContainer = document.getElementById('map'), // 지도를 표시할 div  
        
        // var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
        var map = new kakao.maps.Map(mapContainer, mapOption);

        switch (e.value) {
            case "Jongno":
                var guname = e.value
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Jung":
                var guname = e.value
                console.log(e.value)
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Yongsan":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Seongdong":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Gwangjin":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Dongdaemun":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Jungnang":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Seongbuk":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Gangbuk":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Dobong":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Nowon":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Eunpyeong":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Seodaemun":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Mapo":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Yangcheon":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Gangseo":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Guro":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Geumcheon":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Yeongdeungpo":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Dongjak":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Gwanak":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Seocho":
                var guname = e.value
                console.log(e.value)
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                
                break;
            case "Gangnam":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Songpa":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                break;
            case "Gangdong":
                var guname = e.value
                var positions = eval(guname+"_positions");
                var moveLatLon = new kakao.maps.LatLng(37.490707035940204, 127.00718454153461);
                
                break;
            default:
                break;
        }
        // 마커가 있는 곳을 중점으로 맵을 보여줌줌
        var bounds = new kakao.maps.LatLngBounds(); 
        console.log(positions.length)
        for (i = 0; i < positions.length; i++) {
            console.log(positions[i]["latlng"])
            bounds.extend(positions[i]["latlng"]);
        }
        map.setBounds(bounds);
        // 마커를 생성하기기
        
        for (var i = 0; i < positions.length; i++) {
        // 마커를 생성합니다
        var marker = new kakao.maps.Marker({
            map: map, // 마커를 표시할 지도
            position: positions[i].latlng // 마커의 위치
        });
        

        // 마커에 표시할 인포윈도우를 생성합니다 
        var infowindow = new kakao.maps.InfoWindow({
            content: positions[i].content // 인포윈도우에 표시할 내용
        });

        
        // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
        // 이벤트 리스너로는 클로저를 만들어 등록합니다 
        // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
        kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
        kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
    }

    // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
    function makeOverListener(map, marker, infowindow) {
        return function() {
            infowindow.open(map, marker);
        };
    }

    // 인포윈도우를 닫는 클로저를 만드는 함수입니다 
    function makeOutListener(infowindow) {
        return function() {
            infowindow.close();
        };
    }
    }
    var selectgu = document.getElementById('gu-select');
    selectgu.addEventListener('select',function(event){
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div  
        mapOption = { 
            center: new kakao.maps.LatLng(37.5178693164268, 127.0153725435554), // 지도의 중심좌표
            level: 6 // 지도의 확대 레벨
        };
        var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
        var positions = Secho_positions;
        for (var i = 0; i < positions.length; i ++) {
        // 마커를 생성합니다
        var marker = new kakao.maps.Marker({
            map: map, // 마커를 표시할 지도
            position: positions[i].latlng // 마커의 위치
        });

        // 마커에 표시할 인포윈도우를 생성합니다 
        var infowindow = new kakao.maps.InfoWindow({
            content: positions[i].content // 인포윈도우에 표시할 내용
        });

        // 마커에 mouseover 이벤트와 mouseout 이벤트를 등록합니다
        // 이벤트 리스너로는 클로저를 만들어 등록합니다 
        // for문에서 클로저를 만들어 주지 않으면 마지막 마커에만 이벤트가 등록됩니다
        kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
        kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
    }

    // 인포윈도우를 표시하는 클로저를 만드는 함수입니다 
    function makeOverListener(map, marker, infowindow) {
        return function() {
            infowindow.open(map, marker);
        };
    }

    // 인포윈도우를 닫는 클로저를 만드는 함수입니다 
    function makeOutListener(infowindow) {
        return function() {
            infowindow.close();
        };
    }
    })

    </script>
</body>
</html>